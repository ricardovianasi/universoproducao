!function(a,b){var c=function(a,c){this.element=a,this.$element=b(a),this.options=c};c.prototype={defaults:{form:"#post-form"},init:function(){this.config=b.extend({},this.defaults,this.options);var a=this;a.changeStatus(),a.changePostDate(),a.descartAction(),a.publishAction(),a.draftAction(),a.saveAction()},changeStatus:function(){var a=this;a.$element.find(".status .action.edit").on("click",function(c){c.preventDefault();var d=a.$element.find(".status .options");d.hasClass("show-options")?(d.removeClass("show-options").hide(100),b(this).text("Editar")):(d.addClass("show-options").show(100),b(this).text("Cancelar"))}),a.$element.find(".status .action.ok").on("click",function(b){b.preventDefault();var c=a.$element.find(".status .options select[name='status']").val();""!=c&&(a.$element.find(".status span > strong").text(a.$element.find(".status .options select[name='status'] option:selected").text()),a.$element.find(".status .options").removeClass("show-options").hide(100),a.$element.find(".status .action.edit").text("Editar"))})},changePostDate:function(){var a=this;a.$element.find(".post-date .action.edit").on("click",function(c){c.preventDefault();var d=a.$element.find(".post-date .options");d.hasClass("show-options")?(d.removeClass("show-options").hide(100),b(this).text("Editar")):(d.addClass("show-options").show(100),b(this).text("Cancelar"))}),a.$element.find(".post-date .action.ok").on("click",function(b){b.preventDefault();var c=a.$element.find(".post-date input[name='date']").datepicker("getDate"),d=a.$element.find(".post-date input[name='hour']").timepicker("getTime").val(),e=new Date(c.getFullYear(),c.getMonth(),c.getDate(),d.split(":")[0],d.split(":")[1]),f=moment(e);a.$element.find(".post-date span strong").text(f.format("DD/MM/YYYY [às] HH:mm")),a.$element.find(".post-date input[name='postDate']").val(f.format("DD/MM/YYYY HH:mm")),a.$element.find(".post-date .options").hide(100),a.$element.find(".post-date .options").removeClass("show-options"),a.$element.find(".post-date .action.edit").text("Editar")})},descartAction:function(){this.$element.find(".form-actions .action.cancel").on("click",function(c){c.preventDefault();var d=b(this);bootbox.dialog({message:"Tem certeza que deseja descartar as alterações?",title:"Atenção",buttons:{success:{label:"OK",className:"red",callback:function(){App.blockUI({cenrerY:!0,animate:!0}),a.location.href=d.attr("href")}},danger:{label:"Cancelar",className:"blue",callback:function(){}}}})})},publishAction:function(){var a=this;a.$element.find('.form-actions button[name="publish"]').on("click",function(b){b.preventDefault(),a.$element.find(".status .options select[name='status']").val("published"),a.save()})},draftAction:function(){var a=this;a.$element.find(".heding-actions .action.save-draft").on("click",function(b){b.preventDefault(),a.$element.find(".status .options select[name='status']").val("draft"),a.save()})},saveAction:function(){var a=this;a.$element.find('.form-actions button[name="save"]').on("click",function(b){b.preventDefault(),a.save()})},save:function(){var a=this;App.blockUI({cenrerY:!0,animate:!0}),setTimeout(function(){b(a.config.form).submit()},1500)}},c.defaults=c.prototype.defaults,b.fn.postStatus=function(a){return this.each(function(){new c(this,a).init()})},a.PostStatus=Plugin}(window,jQuery);