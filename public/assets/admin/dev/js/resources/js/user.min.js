!function(a,b){var c=function(a,c){this.element=a,this.$element=b(a),this.options=c,this.$modal=b("#user-modal")};c.prototype={defaults:{},init:function(){this.config=b.extend({},this.defaults,this.options,this.$element.data());var a=this;a.$element.on("click",function(c){c.preventDefault(),a.$modal.empty(),App.blockUI({cenrerY:!0,animate:!0});var d={};a.config.userId&&(d.id=a.config.userId),a.config.hasOwnProperty("viewOnly")&&(d.viewOnly=1);var e=b.ajax({type:"GET",url:urlUserModal,data:jQuery.param(d),dataType:"html"});e.done(function(b){a.$modal.attr("style",""),a.$modal.html(b),a.$modal.modal(),a.registerEvents(),App.unblockUI()})})},registerEvents:function(){var a=this;a.$modal.find("#user-modal-paginator a").on("click",function(c){c.preventDefault();var d=b(this).attr("href");if("#"!=d){App.blockUI({cenrerY:!0,animate:!0,target:a.$modal});var e=b.ajax({type:"GET",url:d,dataType:"html"});e.done(function(b){a.$modal.html(b),a.registerEvents(),App.unblockUI()})}});var c=a.$modal.find(".user-search");c.find('button[type="submit"]').on("click",function(d){d.preventDefault(),App.blockUI({cenrerY:!0,animate:!0,target:a.$modal}),c.append(b('<input type="hidden" name="peform-filter"/>'));var e=urlUserModal;a.config.userId&&(e+="?id="+a.config.userId);var f=b.ajax({type:"GET",url:e,data:c.serialize(),dataType:"html"});f.done(function(b){a.$modal.html(b),a.registerEvents(),a.resizeModal(),App.unblockUI()})}),a.$modal.find(".user-modal-select").on("click",function(c){c.preventDefault();var d=b(this),e=d.data("name"),f=d.data("id");if(a.config.selectIdTo){var g=b(a.config.selectIdTo);g.val(f)}if(a.config.selectNameTo){var h=b(a.config.selectNameTo);h.val(e)}a.$element.data("user-id",f),a.$modal.modal("hide"),a.$modal.on("hidden.bs.modal",function(b){a.$modal.empty(),a.$element.off(),a.$element.user()})})},resizeModal:function(){var a=this,b=a.$modal.height()/2;a.$modal.css("margin-top","-"+b+"px")}},c.defaults=c.prototype.defaults,b.fn.user=function(a){return this.each(function(){new c(this,a).init()})},a.User=Plugin}(window,jQuery);