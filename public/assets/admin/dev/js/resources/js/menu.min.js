!function(a,b){var c=function(a,c){this.element=a,this.$element=b(a),this.options=c};c.prototype={defaults:{},init:function(){this.config=b.extend({},this.defaults,this.options,this.$element.data());var a=this,c=a.$element.find(".admin-menu-add .admin-menu-add-external-url form");a.$element.find(".admin-menu-add .admin-menu-add-external-url .action-add").on("click",function(b){b.preventDefault(),a.validateForm(c)&&a.createNode(c.serialize())});var d=a.$element.find(".admin-menu-add .admin-menu-add-page form");a.$element.find('.admin-menu-add .admin-menu-add-page form a[data-toggle="tab"]').on("shown.bs.tab",function(a){d.find("input.icheck").iCheck("uncheck")}),a.$element.find(".admin-menu-add .admin-menu-add-page .action-add").on("click",function(b){b.preventDefault(),a.validateForm(d)&&d.find('input[type="checkbox"]:checked').length>0&&a.createNode(d.serialize())}),b(document).on("click",".admin-menu-items .menu-items .form-item-edit .actions .remove",function(a){a.preventDefault();var c=b(this).closest(".dd-item");c.children(".dd-handle").first().css({"border-color":"red",background:"#FFB5B5"}),c.slideUp(function(){c.remove()})}),b(document).on("keyup",'.admin-menu-items .menu-items .form-item-edit input[name="label"]',function(a){b(this).closest(".dd-item").data("label",b(this).val()).children(".dd-handle").children().text(b(this).val())}),b(document).on("keyup",'.admin-menu-items .menu-items .form-item-edit input[name="url"]',function(a){b(this).closest(".dd-item").data("external-url",b(this).val())}),a.$element.find(".admin-menu-add .search-page-action").on("click",function(c){if(c.preventDefault(),a.$element.find('#tab_search_pages .form-search input[name="search"]').val()){var d=a.$element.find("#tab_search_pages .form-search :input").serialize();App.blockUI({cenrerY:!0,animate:!0}),b.ajax({type:"GET",url:a.config.urlPage,data:d,success:function(c){c.error?alert(c.error):(a.$element.find(".admin-menu-add #tab_search_pages .page-list").replaceWith(c.pages),b(".icheck").iCheck({checkboxClass:"icheckbox_minimal-grey"}))},error:function(){alert("Erro desconhecido. Tente novamente")},complete:function(){App.unblockUI()}})}}),a.$element.find(".admin-menu-items .form-actions .action-save").on("click",function(c){c.preventDefault();var d=a.$element.find(".admin-menu-items .menu-items .dd").nestable("serialize");App.blockUI({cenrerY:!0,animate:!0});var e=b('<form method="POST">').append(b('<input name="menu">').val(JSON.stringify(d)));b(document.body).append(e),e.submit()})},createNode:function(a){var c=this;App.blockUI({cenrerY:!0,animate:!0}),b.ajax({type:"POST",url:c.config.urlItem,data:a,success:function(a){a.error?alert(a.error):(c.addNode(a.node),c.resetForm())},error:function(){alert("Erro desconhecido. Tente novamente")},complete:function(){App.unblockUI()}})},addNode:function(a){this.$element.find(".admin-menu-items .menu-items .dd-list").first().append(a)},resetForm:function(){this.$element.find(".admin-menu-add form").trigger("reset"),this.$element.find(".icheck").iCheck("uncheck"),b(document).find(".icheck").iCheck("uncheck")},validateForm:function(a){return a.validate({highlight:function(a){b(a).closest(".form-group").addClass("has-error")},errorPlacement:function(a,b){return""},unhighlight:function(a){b(a).closest(".form-group").removeClass("has-error")}}),a.valid()}},c.defaults=c.prototype.defaults,b.fn.menu=function(a){return this.each(function(){new c(this,a).init()})},a.Menu=Plugin}(window,jQuery);